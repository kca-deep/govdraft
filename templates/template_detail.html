<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>템플릿 상세 정보</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 아이콘 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <div class="bg-white rounded-lg shadow-md overflow-hidden">
            <div class="p-6">
                <!-- 로딩 표시기 -->
                <div id="loading" class="flex items-center justify-center my-12">
                    <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"></div>
                    <span class="ml-3 text-lg text-gray-600">템플릿 정보를 불러오는 중...</span>
                </div>
                
                <!-- 템플릿 정보 -->
                <div id="template-content" class="hidden">
                    <header class="mb-6 flex justify-between items-start">
                        <div>
                            <h1 id="template-title" class="text-3xl font-bold text-gray-800 mb-2"></h1>
                            <div class="flex items-center text-gray-600">
                                <span id="template-ministry" class="mr-4"></span>
                                <span id="template-date"></span>
                            </div>
                        </div>
                        <a href="/" class="text-blue-600 hover:text-blue-800 flex items-center">
                            <i class="fas fa-arrow-left mr-2"></i> 목록으로 돌아가기
                        </a>
                    </header>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <div class="md:col-span-2">
                            <div class="mb-8">
                                <h2 class="text-xl font-semibold text-gray-800 mb-3">개요</h2>
                                <div id="template-summary" class="text-gray-600 leading-relaxed"></div>
                            </div>
                            
                            <div class="mb-8">
                                <h2 class="text-xl font-semibold text-gray-800 mb-3">주요 내용</h2>
                                <div id="template-content-main" class="prose max-w-none"></div>
                            </div>
                            
                            <!-- 템플릿 미리보기 -->
                            <div class="mb-8">
                                <h2 class="text-xl font-semibold text-gray-800 mb-3">문서 미리보기</h2>
                                <div class="border border-gray-200 rounded-lg p-6">
                                    <div id="template-preview" class="prose max-w-none"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="md:col-span-1">
                            <div class="bg-gray-50 rounded-lg p-5 mb-6">
                                <h2 class="text-lg font-medium text-gray-800 mb-4">메타데이터</h2>
                                
                                <div class="mb-3">
                                    <h3 class="text-sm font-medium text-gray-700">발행 부처</h3>
                                    <p id="meta-ministry" class="text-gray-600"></p>
                                </div>
                                
                                <div class="mb-3">
                                    <h3 class="text-sm font-medium text-gray-700">문서 유형</h3>
                                    <p id="meta-doctype" class="text-gray-600"></p>
                                </div>
                                
                                <div class="mb-3">
                                    <h3 class="text-sm font-medium text-gray-700">발행일</h3>
                                    <p id="meta-date" class="text-gray-600"></p>
                                </div>
                                
                                <div class="mb-3">
                                    <h3 class="text-sm font-medium text-gray-700">작성자</h3>
                                    <p id="meta-author" class="text-gray-600"></p>
                                </div>
                                
                                <div class="mb-3">
                                    <h3 class="text-sm font-medium text-gray-700">태그</h3>
                                    <div id="meta-tags" class="flex flex-wrap gap-2 mt-1"></div>
                                </div>
                            </div>
                            
                            <div class="rounded-lg border border-blue-200 bg-blue-50 p-5">
                                <h2 class="text-lg font-medium text-blue-800 mb-4">템플릿 설정</h2>
                                
                                <div class="space-y-4">
                                    <button id="use-template" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition duration-300 ease-in-out">
                                        이 템플릿 사용하기
                                    </button>
                                    
                                    <button id="download-template" class="w-full bg-white border border-blue-600 hover:bg-blue-50 text-blue-600 font-medium py-2 px-4 rounded-lg transition duration-300 ease-in-out">
                                        템플릿 다운로드
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 에러 메시지 -->
                <div id="error-message" class="hidden flex flex-col items-center justify-center py-16 text-center">
                    <i class="fas fa-exclamation-circle text-red-500 text-5xl mb-4"></i>
                    <h3 class="text-xl font-medium text-gray-600 mb-2">템플릿을 찾을 수 없습니다</h3>
                    <p class="text-gray-500">요청하신 템플릿 정보를 찾지 못했습니다.</p>
                    <a href="/" class="mt-4 text-blue-600 hover:text-blue-800">목록으로 돌아가기</a>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const templateId = '{{ template_id }}';
            const loading = document.getElementById('loading');
            const templateContent = document.getElementById('template-content');
            const errorMessage = document.getElementById('error-message');
            
            // 사용 버튼 이벤트 리스너
            document.getElementById('use-template').addEventListener('click', function() {
                alert('이 템플릿이 선택되었습니다.');
                // 여기에 템플릿 사용 로직 추가
            });
            
            // 다운로드 버튼 이벤트 리스너
            document.getElementById('download-template').addEventListener('click', function() {
                alert('템플릿 다운로드를 시작합니다.');
                // 여기에 다운로드 로직 추가
            });
            
            // 템플릿 정보 가져오기
            fetchTemplateDetails(templateId);
            
            // 템플릿 상세 정보 가져오기 함수
            function fetchTemplateDetails(id) {
                // 실제로는 API 호출이 필요하지만, 현재는 예시 데이터를 사용합니다.
                // 실제 구현 시에는 fetch()를 사용하여 API에서 데이터를 가져와야 합니다.
                // fetch(`/api/templates/${id}`)
                
                // 로딩 상태 표시
                loading.classList.remove('hidden');
                templateContent.classList.add('hidden');
                errorMessage.classList.add('hidden');
                
                // 데이터 가져오기 시뮬레이션 (지연 시간 추가)
                setTimeout(() => {
                    // 예시 데이터 - 실제로는 API 응답 데이터로 대체해야 함
                    const template = {
                        id: templateId,
                        title: "인공지능 활용 정책 보고서",
                        ministry: "과학기술정보통신부",
                        docType: "정책 보고서",
                        publishedDate: "2023-10-15",
                        author: "디지털혁신정책과",
                        summary: "인공지능 기술의 공공부문 활용 방안과 향후 발전 계획에 관한 정책 보고서입니다. 최신 기술 동향과 해외 사례를 바탕으로 한국형 AI 정책 방향을 제시합니다.",
                        content: "<p>인공지능 기술은 공공부문의 혁신을 이끌 핵심 동력으로 부상하고 있습니다. 본 보고서는 국내외 인공지능 정책 현황을 분석하고, 한국 상황에 맞는 AI 활용 방안을 제시합니다.</p><h3>주요 내용</h3><ul><li>인공지능 기술 국내외 현황 분석</li><li>공공부문 인공지능 도입 사례 연구</li><li>한국형 AI 정책 프레임워크 제안</li><li>단계별 추진 전략 및 로드맵</li></ul><p>특히 행정 효율화, 민원 서비스 개선, 정책 의사결정 지원 등 다양한 영역에서 인공지능 기술을 활용하는 방안을 구체적으로 다루고 있습니다.</p>",
                        preview: "<h1 style='text-align:center;'>인공지능 활용 정책 보고서</h1><div style='text-align:right;margin-bottom:20px;'>과학기술정보통신부</div><h2>개요</h2><p>본 보고서는 인공지능 기술의 공공부문 활용 현황과 미래 방향성을 제시합니다.</p><h2>현황 분석</h2><p>국내외 인공지능 기술 동향 및 공공부문 적용 사례를 분석합니다.</p><h2>정책 제안</h2><p>한국형 AI 정책 프레임워크와 단계별 추진 전략을 제안합니다.</p>",
                        tags: ["인공지능", "정책", "공공서비스", "디지털 전환"]
                    };
                    
                    // 성공적으로 데이터를 가져왔다면 화면에 표시
                    displayTemplateDetails(template);
                }, 1000);
            }
            
            // 템플릿 상세 정보 표시 함수
            function displayTemplateDetails(template) {
                if (!template) {
                    loading.classList.add('hidden');
                    errorMessage.classList.remove('hidden');
                    return;
                }
                
                // 기본 정보 표시
                document.getElementById('template-title').textContent = template.title;
                document.getElementById('template-ministry').textContent = template.ministry;
                document.getElementById('template-date').textContent = new Date(template.publishedDate).toLocaleDateString('ko-KR');
                document.getElementById('template-summary').textContent = template.summary;
                document.getElementById('template-content-main').innerHTML = template.content;
                document.getElementById('template-preview').innerHTML = template.preview;
                
                // 메타데이터 표시
                document.getElementById('meta-ministry').textContent = template.ministry;
                document.getElementById('meta-doctype').textContent = template.docType;
                document.getElementById('meta-date').textContent = new Date(template.publishedDate).toLocaleDateString('ko-KR');
                document.getElementById('meta-author').textContent = template.author;
                
                // 태그 표시
                const tagsContainer = document.getElementById('meta-tags');
                tagsContainer.innerHTML = '';
                
                if (template.tags && template.tags.length > 0) {
                    template.tags.forEach(tag => {
                        const tagElement = document.createElement('span');
                        tagElement.className = 'px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full';
                        tagElement.textContent = tag;
                        tagsContainer.appendChild(tagElement);
                    });
                } else {
                    tagsContainer.textContent = '태그 정보 없음';
                }
                
                // 로딩 상태 숨기고 콘텐츠 표시
                loading.classList.add('hidden');
                templateContent.classList.remove('hidden');
            }
        });
    </script>
</body>
</html> 